task_description: |
  Task: Add a bulk task creation endpoint (POST /api/tasks/bulk)
  Instructions:
    Up to now, the API works on tasks one at a time. You can create a single
    task, update a single task, and so on. That is fine for simple UIs, but it
    becomes clumsy as soon as you want to import a batch of tasks or let
    someone paste in a whole list from a spreadsheet.

    In this task you will add a **bulk creation** endpoint that accepts a list
    of new tasks in one request and either creates all of them or none of
    them. The goal is to make the behaviour predictable and easy to reason
    about from the client side.

    New endpoint to implement:
      - HTTP method: `POST`
      - Route: `/api/tasks/bulk`

    Request body:
      - JSON object with a single top-level field:

          {
            "tasks": [
              { "title": "Task A", "description": "...", "status": "pending" },
              { "title": "Task B", "description": "...", "status": "completed" }
            ]
          }

      - The `tasks` field must be:
        - Present.
        - An array.
        - Contain at least 1 task and at most 50 tasks.

      - Each task entry must follow these rules:
        - `title` is required and must be a non-empty string once trimmed.
        - `description` is optional; when missing, it can default to an empty
          string.
        - `status` is optional; when present, it must be one of the allowed
          values already used by the rest of the API: `pending`,
          `in-progress`, or `completed`.

    Behaviour:
      - If the request body or any individual task entry fails validation,
        the endpoint must respond with HTTP 400 and **not create any tasks at
        all**. This is an all-or-nothing operation.
      - When validation fails, return a JSON body that at least contains a
        human-readable `message` field describing the problem. You do not need
        to report every individual error, but the message should make it clear
        what went wrong (for example, "tasks array is required" or "one or
        more tasks have an invalid status").
      - When the request is valid, the endpoint should create all tasks in a
        single operation and respond with HTTP 201.
      - On success, the response body should be a JSON array of the created
        Task documents, in the same order as they appeared in the input. Each
        item should look like the normal `POST /api/tasks` response (including
        `_id`, timestamps, and the resolved `status`).

    Implementation notes:
      - Add a new controller function in `backend/controllers/taskController.js`
        (for example, `createTasksBulk`).
      - Wire it up in `backend/routes/tasks.js` on the `/bulk` path so the
        full route becomes `/api/tasks/bulk`.
      - Reuse the existing `Task` model and `ALLOWED_STATUSES` helper; do not
        introduce a separate list of allowed status values.
      - You can use `Task.insertMany` or a loop with `Task.create` as long as
        the overall behaviour matches the all-or-nothing requirement. The
        simplest approach is to validate the payload in JavaScript first and
        only call Mongoose once you know every entry is acceptable.
      - You do **not** need to use MongoDB transactions for this task; a clear
        validation pass followed by a single batch insert is perfectly fine.

    How this will be tested:
      - The tests will start MongoDB and the backend using a task-local
        `docker-compose.yaml`, just like in the earlier tasks.
      - They will send:
        - A valid bulk payload with a handful of tasks and check that:
          - The endpoint returns 201.
          - The response is an array.
          - The number of created documents matches the request.
        - A payload where one of the tasks has an invalid `status` and check
          that:
          - The endpoint returns 400.
          - No new tasks were actually created in the database.
        - A payload where the `tasks` array is too large (more than 50
          entries) and check that this is rejected with a 400.

    What to be careful about:
      - Validation should be strict but not surprising. Empty titles, missing
        `tasks`, or obviously wrong data should all result in a clean 400 with
        a short explanation.
      - Do not change the behaviour of the existing single-task endpoints.
        `POST /api/tasks` should continue to work exactly as before.
      - Make sure the endpoint behaves sensibly even when the database is
        empty to begin with.

    Think of this as the kind of endpoint you would want when importing tasks
    from a CSV file or letting a user paste in a backlog. Either the whole
    batch is accepted and stored, or the client gets a clear error and can fix
    the input before trying again.

difficulty: hard
category: Feature
tags: [node, express, mongodb, backend, bulk]
parser_name: pytest

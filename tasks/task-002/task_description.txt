task_description: |
  Task: Implement aggregated task statistics endpoint (GET /api/tasks/stats)
  Instructions:
    The backend for Project Puzzle currently exposes CRUD-style endpoints under
    `/api/tasks`, backed by a MongoDB collection via Mongoose. For Task 001 you
    implemented status-based filtering on `GET /api/tasks`. For this task,
    you will add a **new, read-only endpoint** that returns **aggregate
    statistics** about the tasks currently stored in the database.

    New endpoint to implement:
      - HTTP method: `GET`
      - Route: `/api/tasks/stats`

    Required behaviour:
      - When called, the endpoint must compute and return a JSON payload with:
        - `total`: the total number of Task documents currently stored.
        - `byStatus`: an object mapping each allowed status value to the number
          of tasks with that status, e.g.:

              {
                "total": 5,
                "byStatus": {
                  "pending": 2,
                  "in-progress": 1,
                  "completed": 2
                }
              }

      - The set of statuses must match the same allowed values used elsewhere
        in the backend: `pending`, `in-progress`, `completed`.
      - Status keys that have a count of zero should still be present in the
        `byStatus` object with a value of `0`.

    Technical notes and constraints:
      - You should **reuse** the `ALLOWED_STATUSES` array defined in
        `backend/controllers/taskController.js` so that the list of supported
        statuses stays in one place.
      - Implement the logic as a new controller function (for example,
        `getTaskStats`) in `backend/controllers/taskController.js` and expose
        it via the Express router in `backend/routes/tasks.js`.
      - You may use either Mongoose aggregation (`Task.aggregate(...)`) or
        simple queries combined in Node.js, as long as the behaviour is correct
        and efficiently implemented.
      - Do not change the existing semantics of the other `/api/tasks` routes
        (list, create, update, delete). The tests for this task only depend on
        the new `/api/tasks/stats` route and on the existing `POST /api/tasks`
        for creating sample data.

    Test expectations:
      - When there are no tasks in the database, `GET /api/tasks/stats` must
        return a 200 response with:
          - `total` set to 0.
          - `byStatus` present and containing all allowed statuses with
            a value of `0`.
      - When tasks exist with a mix of statuses, the endpoint must return
        correct counts per status and a `total` equal to the sum of all
        individual status counts.

    Environment and tooling:
      - As with Task 001, the backend and MongoDB will be started via a
        task-local `docker-compose.yaml` inside `tasks/task-002/`.
      - Tests are written in Python using `pytest` and `requests`, and are
        executed by `tasks/task-002/run-tests.sh`, which is in turn invoked
        from the repo root by `./run_tests.sh` when you target Task 002.

    Success criteria:
      - All tests in `tasks/task-002/task_tests.py` pass when run via
        `tasks/task-002/run-tests.sh`.
      - The shape of the JSON returned from `GET /api/tasks/stats` matches the
        expectations exactly (field names and nesting), and the counts are
        correct for the current contents of the database.
      - Existing behaviour of other `/api/tasks` endpoints remains unchanged.

difficulty: medium
category: Feature
tags: [node, express, mongodb, backend, aggregation]
parser_name: pytest

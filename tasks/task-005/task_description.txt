task: JWT Claims and Secret Precedence
instructions: >-
  Check that access tokens include standard details - grab the JWT secret right too
  If available, go with process.env.JWT_SECRET - add a short setup hint up front
  health endpoint.
task_description: |
  Boost how JWT data is defined, also improve setup clarity.

  Here's what should work – since we'll try it on our own
  - The access token (JWT) contains: sub, email, iat, exp. Runs on HS256 instead - unless that’s a mistake. Might get updated sometime. For now, this is what we’ve got.
  - exp should happen shortly (we're not hanging around - just confirming it's set but not immediate).
  If the JWT_SECRET variable’s around, go with it - else, grab a solid backup choice.
  - The /api/health response needs the X-App-Name header set to a clear value.
  - The /api/me endpoint must disable a token once it's expired - we'll check this by testing with an old one.
  - The /api/me endpoint must reject a token when it’s signed using a wrong secret.

  Over here’s where you’ll adjust things - places you might change
  - server/src/auth/service.js – makes tokens, setting claims along with encryption type; verifies secrets by their importance level.
  - server/src/index.js – includes X-App-Name header while verifying health, using a small tweak inside the check routine that runs each time.
  - server/src/config.js – pass along APP_NAME, pull JWT secret only when needed instead.

  Thoughts (not included in your total):
  Use HS256 consistently - else, keys could leak through gaps.

difficulty: hard
category: Feature
tags: [node, express, jwt]
parser_name: pytest
